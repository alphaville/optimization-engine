<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Advanced options · OpEn</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Advanced options of opengen, OpEn&#x27;s Python interface"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Advanced options · OpEn"/><meta property="og:type" content="website"/><meta property="og:url" content="https://alphaville.github.io/optimization-engine/"/><meta property="og:description" content="Advanced options of opengen, OpEn&#x27;s Python interface"/><meta property="og:image" content="https://alphaville.github.io/optimization-engine/img/docusaurus2.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://alphaville.github.io/optimization-engine/img/docusaurus.png"/><link rel="shortcut icon" href="/optimization-engine/img/box.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://alphaville.github.io/optimization-engine/blog/atom.xml" title="OpEn Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://alphaville.github.io/optimization-engine/blog/feed.xml" title="OpEn Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/optimization-engine/js/scrollSpy.js"></script><link rel="stylesheet" href="/optimization-engine/css/main.css"/><script src="/optimization-engine/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/optimization-engine/"><img class="logo" src="/optimization-engine/img/box.png" alt="OpEn"/><h2 class="headerTitleWithLogo">OpEn</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/optimization-engine/docs/open-intro" target="_self">Docs</a></li><li class=""><a href="/optimization-engine/blog/" target="_self">Blog</a></li><li class=""><a href="https://docs.rs/optimization_engine/*/optimization_engine/" target="_self">Rust API</a></li><li class=""><a href="https://alphaville.github.io/optimization-engine/api-dox/html/index.html" target="_self">Opengen API</a></li><li class=""><a href="/optimization-engine/blog/2019/03/06/talk-to-us" target="_self">Chat</a></li><li class=""><a href="https://www.github.com/alphaville/optimization-engine" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Python</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">OpEn Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/open-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/installation">Installation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Python<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/python-interface">Opengen basics</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/optimization-engine/docs/python-advanced">Advanced options</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/python-c">C/C++ Bindings</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/python-bindings">Direct interface</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/python-tcp-ip">TCP Sockets</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/python-ros">ROS packages</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/python-examples">Examples</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">MATLAB<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/matlab-interface">MATLAB</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/matlab-examples">Examples</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Rust<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/openrust-basic">Introduction</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/openrust-alm">ALM/PM</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/openrust-features">Features</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Docker<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/docker">Docker</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extras<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/algorithm">Algorithm</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/cite_open">Cite OpEn</a></li><li class="navListItem"><a class="navItem" href="/optimization-engine/docs/contributing">Contributing</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Advanced options</h1></header><article><div><span><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<h2><a class="anchor" aria-hidden="true" id="solver-options"></a><a href="#solver-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Solver options</h2>
<p>The user may wish to modify some additional solver parameters.</p>
<p>When using the penalty method to account for general constraints,
the most important parameters which determine the speed of
convergence are the <strong>initial value</strong> of the penalty weight and the
<strong>update factor</strong>. These are set using</p>
<pre><code class="hljs css language-python">solver_config.with_penalty_weight_update_factor(<span class="hljs-number">8.0</span>)       \
             .with_initial_penalty(<span class="hljs-number">20.0</span>)
</code></pre>
<p>The number of the initial penalty weights must be equal to
$n_c$; the number of constraints. If you need to set all
weights to the same value, use</p>
<pre><code class="hljs css language-python">solver_config.with_initial_penalty(<span class="hljs-number">100.0</span>)
</code></pre>
<p>In embedded applications it is often important that the solver
is forced to terminate within a given time period. The user may
set the <strong>maximum runtime</strong> (in microseconds) using</p>
<pre><code class="hljs css language-python"><span class="hljs-comment"># Maximum duration: 50ms</span>
solver_config.with_max_duration_micros(<span class="hljs-number">50000</span>)
</code></pre>
<p>Lastly, the maximum number of outer iterations can be set using</p>
<pre><code class="hljs css language-python">solver_config.with_max_outer_iterations(num_out_iters)
</code></pre>
<p>The number of outer iterations should be kept reasonably small
to avoid too high values of the penalty parameters (which increase
exponentially).</p>
<div class="alert alert-info">
<b>Preconditioning:</b> Opengen since version <b>0.7.0</b> supports a preconditioning mechanism. If activated,  
the initial penalty is computed internally. Moreover, appropriate scaling is applied on the cost function, 
the PM-type constraints, $F_2(u; p) = 0$, and the ALM-type constraints, $F_1(u; p) \in C$, but only if $C=\{0\}$, or 
if $C$ is a quadrant, e.g., $C = \{x: x\leq 0\}$.<br/><br/>
<p>Preconditioning seems to improve the convergence speed and robustness of the solver based
on some initial benchmarks, however, for the time being it is not active by default.
To activate it, use <code>with_preconditioning(True)</code>.</p>
</div>
<p>A complete list of solver options is given in the following table</p>
<table>
<thead>
<tr><th>Method</th><th>Explanation</th></tr>
</thead>
<tbody>
<tr><td><code>with_tolerance</code></td><td>Target $\epsilon$-tolerance</td></tr>
<tr><td><code>with_delta_tolerance</code></td><td>Tolerance $\delta$</td></tr>
<tr><td><code>with_initial_penalty</code></td><td>Initial penalty value, $c_0$</td></tr>
<tr><td><code>with_max_inner_iterations</code></td><td>Maximum number of outer iterations</td></tr>
<tr><td><code>with_max_outer_iterations</code></td><td>Maximum number of inner iterations</td></tr>
<tr><td><code>with_penalty_weight_update_factor</code></td><td>Update factor of penalty weight, $\rho$</td></tr>
<tr><td><code>with_initial_tolerance</code></td><td>Initial tolerance, $\epsilon_0$</td></tr>
<tr><td><code>with_sufficient_decrease_coefficient</code></td><td>Sufficient decrease coeff. (for skipping penalty update)</td></tr>
<tr><td><code>with_max_duration_micros</code></td><td>Maximum duration of execution in micros</td></tr>
<tr><td><code>with_cbfgs_parameters</code></td><td>CBFGS parameters</td></tr>
<tr><td><code>with_lbfgs_memory</code></td><td>LBFGS memory</td></tr>
<tr><td><code>with_inner_tolerance_update_factor</code></td><td>Update factor for the inner tolerance</td></tr>
<tr><td><code>with_preconditioning</code></td><td>Whether preconditioning should be applied</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="build-options"></a><a href="#build-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build options</h2>
<h3><a class="anchor" aria-hidden="true" id="build-mode"></a><a href="#build-mode" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build mode</h3>
<p>During the design phase, one needs to experiment with the problem
formulation and solver parameters. This is way the default build
mode is the &quot;debug&quot; mode, which compiles fast, but it suboptimal.
Building in &quot;release&quot; mode takes slightly longer to compile, but
can lead to a significant speed-up. To do so, use the option</p>
<pre><code class="hljs css language-python">build_config.with_build_mode(
    og.config.BuildConfiguration.DEBUG_MODE)
</code></pre>
<p>οr</p>
<pre><code class="hljs css language-python">build_config.with_build_mode(
    og.config.BuildConfiguration.RELEASE_MODE)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="cross-compilation"></a><a href="#cross-compilation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cross-compilation</h3>
<p>You can either compile for your own system, or cross-compile for a
different target system. For example, to cross-compile for a <strong>Raspberry Pi</strong>,
set the following option</p>
<pre><code class="hljs css language-python">build_config.with_target_system(<span class="hljs-string">"arm-unknown-linux-gnueabihf"</span>)
</code></pre>
<p>or</p>
<pre><code class="hljs css language-python">build_config.with_target_system(<span class="hljs-string">"rpi"</span>)  <span class="hljs-comment"># Raspberry Pi</span>
</code></pre>
<p>Note that you need to install the necessary target first.</p>
<p><details>
<summary><b>See setup details</b></summary>
To cross-compile for a Raspberry Pi you need to run the following in your terminal</p>
<pre><code class="hljs css language-bash">rustup target add arm-unknown-linux-gnueabihf
</code></pre>
<p>You also need to install the following dependencies</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-7-tab-8" class="nav-link active" data-group="group_7" data-tab="tab-group-7-content-8">Linux</div><div id="tab-group-7-tab-9" class="nav-link" data-group="group_7" data-tab="tab-group-7-content-9">MacOS</div></div><div class="tab-content"><div id="tab-group-7-content-8" class="tab-pane active" data-group="group_7" tabindex="-1"><div><span><pre><code class="hljs css language-bash">sudo apt-get update<br />sudo apt-get install -y gcc-arm-linux-gnueabihf libc6-dev-armhf-cross<br /></code></pre>
</span></div></div><div id="tab-group-7-content-9" class="tab-pane" data-group="group_7" tabindex="-1"><div><span><pre><code class="hljs css language-bash"><span class="hljs-comment"># Tap the repository that provides the cross-compiler</span><br />brew tap messense/macos-cross-toolchains<br /><span class="hljs-comment"># Update brew to ensure the tap is recognized (can sometimes be needed)</span><br />brew update <br /><span class="hljs-comment"># Install the full toolchain (includes gcc, binutils, sysroot)</span><br /><span class="hljs-comment"># This specific formula provides the entire toolchain.</span><br />brew install arm-unknown-linux-gnueabihf <br /><br /><span class="hljs-comment"># Verify the compiler is found</span><br /><span class="hljs-built_in">which</span> arm-linux-gnueabihf-gcc || (<span class="hljs-built_in">echo</span> <span class="hljs-string">"arm-linux-gnueabihf-gcc not found in PATH"</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1)<br /></code></pre>
</span></div></div></div></div>
</details>
<p><br>
If you need to compile for a target other than <code>arm-linux-gnueabihf-gcc</code> (<code>rpi</code>)
some manual configuration may be needed (you may need to install the target
and/or a compiler/linker) and you may need to edit the auto-generated
<code>.cargo/config.toml</code> files you will find in your auto-generated solvers.</p>
<p><details>
<summary><b>Non-supported targets</b></summary>
The auto-generated <code>.cargo/config.toml</code> files contain entries like</p>
<pre><code class="hljs css language-toml"><span class="hljs-section">[target.arm-unknown-linux-gnueabihf]</span>
<span class="hljs-attr">linker</span>=<span class="hljs-string">"arm-linux-gnueabihf-gcc"</span>
</code></pre>
<p>Here you may have to insert manually your own target.
Feel free to open an <a href="https://github.com/alphaville/optimization-engine/issues">issue</a>
on GitHub if you would like us to add support for a particular target (create a feature
request); see the <a href="https://alphaville.github.io/optimization-engine/docs/contributing">contributing guidelines</a>.
</details></p>
<p>When cross-compiling for a Raspberry Pi you may want to configure a TCP server
so you can call the optimizer remotely. You can find more information about this
<a href="#tcpip-interface">below</a>.
Once you have cross-compiled, locate the file</p>
<pre><code class="hljs css language-text">{your_optimizer}/tcp_iface_{your_optimizer}/target/arm-unknown-linux-gnueabihf/release/tcp_iface_{your_optimizer}
</code></pre>
<p>—where <code>{your_optimizer}</code> is the name of your optimizer—and copy it to your Raspberry Pi.
On your Raspberry, change the permissions so you can execute this file</p>
<pre><code class="hljs css language-bash">chmod u+x ./tcp_iface_{your_optimizer}
</code></pre>
<p>and <a href="#tcpip-interface">run it</a>. Your OpEn server is live.
Read also the <a href="https://alphaville.github.io/optimization-engine/docs/python-tcp-ip">documentation</a>
on the TCP sockets protocol of OpEn servers.</p>
<h3><a class="anchor" aria-hidden="true" id="other-build-options"></a><a href="#other-build-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other build options</h3>
<p>All build options are shown below</p>
<table>
<thead>
<tr><th>Method</th><th>Explanation</th></tr>
</thead>
<tbody>
<tr><td><code>with_build_directory</code></td><td>Target build directory; the default is <code>.</code></td></tr>
<tr><td><code>with_build_mode</code></td><td><code>release</code> or <code>debug</code>; the default option is <code>release</code>, which requires more time to compile, but leads to high performance executables; use <code>debug</code> for faster compilation, at the cost of lower performance (this is useful when experimenting with OpEn)</td></tr>
<tr><td><code>with_tcp_interface_config</code></td><td>Enable TCP server; provide configuration</td></tr>
<tr><td><code>with_target_system</code></td><td>Target system (to be used when you need to cross-compile)</td></tr>
<tr><td><code>with_build_c_bindings</code></td><td>Enalbe generation of C/C++ bindings</td></tr>
<tr><td><code>with_rebuild</code></td><td>Whether to do a clean build</td></tr>
<tr><td><code>with_open_version</code></td><td>Use a certain version of OpEn (see <a href="https://crates.io/crates/optimization_engine/versions">all versions</a>), e.g., <code>with_open_version(&quot;0.6.0&quot;)</code>, or a local version of OpEn (this is useful when you want to download the latest version of OpEn from github). You can do so using <code>with_open_version(local_path=&quot;/path/to/open/&quot;)</code>.</td></tr>
<tr><td><code>with_allocator</code></td><td>Available in <code>opengen &gt;= 0.6.6</code>. Compile with a different memory allocator. The available allocators are the entries of <code>RustAllocator</code>. OpEn currently supports <a href="https://github.com/gnzlbg/jemallocator">Jemalloc</a> and <a href="https://github.com/EmbarkStudios/rpmalloc-rs">Rpmalloc</a>.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="tcpip-interface"></a><a href="#tcpip-interface" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP/IP interface</h2>
<h3><a class="anchor" aria-hidden="true" id="generation-of-tcp-server"></a><a href="#generation-of-tcp-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generation of TCP server</h3>
<p>In order to change the IP and port at which the server listens
for requests (e.g., for remote connections), you may crate an
<code>TcpServerConfiguration</code> object as follows</p>
<pre><code class="hljs css language-python">tcp_config = og.config.TcpServerConfiguration(<span class="hljs-string">'10.8.0.12'</span>, <span class="hljs-number">9555</span>)
</code></pre>
<p>and then provide it to the builder configuration using</p>
<pre><code class="hljs css language-python">builder_config.with_tcp_interface_config(tcp_config)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="communicate-with-tcp-server"></a><a href="#communicate-with-tcp-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Communicate with TCP server</h3>
<p>There are two ways to connect to a generated TCP server and call the
auto-generated optimizer:</p>
<div class="alert alert-info">
<b>Connect to a local optimizer</b> by providing the path of the optimizer
directory. For that purpose, we need to create an instance of 
<code>OptimizerTcpManager</code> and specify the path to the auto-generated optimizer.
</div>
<p>For example,</p>
<pre><code class="hljs css language-python">mng = og.tcp.OptimizerTcpManager(<span class="hljs-string">'python_build/the_optimizer'</span>)
</code></pre>
<p>we can then <code>start</code> the optimizer. The TCP manager known what IP and port
to link to, so we can <code>call</code> it directly.</p>
<div class="alert alert-info">
<b>Connect to a local optimizer</b> and <b>customize</b> its IP and port. 
This is particularly useful if you need to start multiple instances of a TCP 
server (with different ports).
</div>
<p>For example,</p>
<pre><code class="hljs css language-python">ip = <span class="hljs-string">'0.0.0.0'</span>
port = <span class="hljs-number">5678</span>
mng = og.tcp.OptimizerTcpManager(<span class="hljs-string">'python_build/the_optimizer'</span>, ip, port)
</code></pre>
<div class="alert alert-info">
<b>Connect to a remote optimizer</b> by providing its IP and port. In that 
case we assume that an optimizer is up an running at some remote address
and listens for connections at a certain port. In that case, we cannot 
<code>start</code> the optimizer remotely using the TCP manager. 
</div>
<p>For example to connect to a <em>remote</em> TCP server at <code>10.8.0.7:5678</code>, we can
create a TCP manager as follows:</p>
<pre><code class="hljs css language-python">mng = og.tcp.OptimizerTcpManager(ip=<span class="hljs-string">"10.8.0.7"</span>, port=<span class="hljs-number">5678</span>)
</code></pre>
<p>A list of the methods of <code>OptimizerTcpManager</code> is given below:</p>
<table>
<thead>
<tr><th>Method</th><th>Explanation</th></tr>
</thead>
<tbody>
<tr><td><code>start</code></td><td>Starts the (local) server; throws an exception if the IP is not local. If the server is local, it will start in a separate thread and will remain alive unit <code>kill</code> is invoked.</td></tr>
<tr><td><code>ping</code></td><td>Pings the server to check if it is alive</td></tr>
<tr><td><code>call</code></td><td>Calls the TCP server; provides a parameter and the solver responds with either the solution or an error report</td></tr>
<tr><td><code>kill</code></td><td>Kills the server associated with the TCP manager; works both on local and remote servers.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="metadata"></a><a href="#metadata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metadata</h2>
<p>The solver metadata offer important information about the auto-generated
solver such as its name</p>
<table>
<thead>
<tr><th>Method</th><th>Explanation</th></tr>
</thead>
<tbody>
<tr><td><code>with_optimizer_name</code></td><td>Optimizer name  (which is also the name of the folder in which the auto-generated solver will be stored). The default optimizer name is <code>open_optimizer</code></td></tr>
<tr><td><code>with_authors</code></td><td>Provide list of author names</td></tr>
<tr><td><code>with_licence</code></td><td>Name or URL of license of generated solver; the default licence is the MIT licence</td></tr>
<tr><td><code>with_version</code></td><td>Version of auto-generated solver; the default version is <code>0.0.0</code></td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/optimization-engine/docs/python-interface"><span class="arrow-prev">← </span><span>Opengen basics</span></a><a class="docs-next button" href="/optimization-engine/docs/python-c"><span>C/C++ Bindings</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#solver-options">Solver options</a></li><li><a href="#build-options">Build options</a><ul class="toc-headings"><li><a href="#build-mode">Build mode</a></li><li><a href="#cross-compilation">Cross-compilation</a></li><li><a href="#other-build-options">Other build options</a></li></ul></li><li><a href="#tcpip-interface">TCP/IP interface</a><ul class="toc-headings"><li><a href="#generation-of-tcp-server">Generation of TCP server</a></li><li><a href="#communicate-with-tcp-server">Communicate with TCP server</a></li></ul></li><li><a href="#metadata">Metadata</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/optimization-engine/" class="nav-home"><img src="/optimization-engine/img/box.png" alt="OpEn" width="66" height="58"/></a><div><h5>Docs</h5><a href="/optimization-engine/docs/open-intro.html">Getting Started</a><a href="/optimization-engine/docs/python-interface.html">Python interface</a><a href="/optimization-engine/docs/matlab-interface.html">MATLAB interface</a><a href="/optimization-engine/docs/docker">Docker</a></div><div><h5>Community</h5><a href="/optimization-engine/users.html">User Showcase</a><a href="https://discord.gg/mfYpn4V" target="_blank" rel="noreferrer noopener">Discord community</a><a href="https://gitter.im/alphaville/optimization-engine" target="_blank" rel="noreferrer noopener">Chat on Gitter</a><a href="https://twitter.com/isToxic" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/optimization-engine/blog">Blog</a><a href="https://github.com/alphaville/optimization-engine" target="_blank">GitHub</a><a href="https://www.openhub.net/p/optimization-engine" target="_blank">Openhub</a><a class="github-button" href="https://github.com/alphaville/optimization-engine" data-icon="octicon-star" data-count-href="/alphaville/optimization-engine/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><br/><br/><a href="https://twitter.com/share?ref_src=twsrc%5Etfw&amp;via=isToxic" class="twitter-share-button" data-show-count="false" data-text="Fast and accurate embedded nonconvex optimization with #OptimizationEngine">Tweet</a><script async="" src="https://platform.twitter.com/widgets.js" charSet="utf-8"></script></div></section><section class="copyright">Copyright © 2025 Pantelis Sopasakis and Emil Fresk</section><section class="copyright"><div>Box Icon made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div></section></footer></div></body></html>